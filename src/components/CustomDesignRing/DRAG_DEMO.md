# 珠子拖拽功能演示

## 功能概述

珠子手串DIY组件现在支持拖拽调整珠子位置，让用户可以更灵活地设计手串布局。

## 使用方法

### 1. 触摸拖拽
- **长按珠子**：用手指长按任意珠子
- **拖拽移动**：保持长按状态，拖拽珠子到新位置
- **松开完成**：松开手指，珠子位置调整完成

### 2. 自动调整
- 拖拽完成后，系统会自动重新计算其他珠子的位置
- 保持整体圆环形状不变
- 避免珠子重叠和位置冲突

### 3. 位置限制
- 自动限制拖拽范围，防止珠子超出边界
- 智能调整位置，确保珠子不会重叠
- 保持合理的手串形状

## 技术特性

### 触摸事件支持
- `onTouchStart`：触摸开始，检测拖拽目标
- `onTouchMove`：触摸移动，跟踪拖拽过程
- `onTouchEnd`：触摸结束，完成位置调整
- `onTouchCancel`：触摸取消，处理异常情况

### 坐标系统
- 自动转换触摸坐标到Canvas坐标系
- 精确计算珠子位置和角度
- 支持不同设备的像素密度

### 状态管理
- 拖拽过程中的状态跟踪
- 视觉反馈和用户提示
- 错误处理和异常恢复

## 视觉反馈

### 拖拽提示
- 拖拽过程中显示"拖拽中..."提示
- 触摸提示信息指导用户操作
- 成功/失败状态的Toast提示

### 样式变化
- 拖拽时Canvas样式变化
- 选中珠子的高亮显示
- 拖拽状态的视觉指示

## 错误处理

### 位置验证
- 检查拖拽位置是否在合理范围内
- 防止珠子重叠和边界越界
- 自动调整无效位置

### 异常处理
- 触摸事件异常的处理
- 位置计算失败的回退
- 用户友好的错误提示

## 性能优化

### 防抖处理
- Canvas绘制的防抖优化
- 触摸事件的节流处理
- 状态更新的批量处理

### 缓存机制
- 图片资源的缓存管理
- 计算结果的缓存复用
- 内存使用的优化控制

## 兼容性

### 设备支持
- 支持触摸屏设备
- 兼容不同屏幕尺寸
- 适配各种像素密度

### 平台兼容
- Taro.js小程序支持
- React组件化架构
- 跨平台兼容性

## 使用建议

1. **操作指导**：首次使用时显示操作提示
2. **位置预览**：拖拽过程中显示位置预览
3. **撤销功能**：支持拖拽操作的撤销
4. **保存状态**：自动保存拖拽后的状态

## 未来扩展

1. **多点触控**：支持同时拖拽多个珠子
2. **手势识别**：支持旋转、缩放等手势
3. **动画效果**：拖拽过程的平滑动画
4. **历史记录**：拖拽操作的历史记录和回放
